(function(e){function t(t){for(var n,r,l=t[0],o=t[1],u=t[2],d=0,f=[];d<l.length;d++)r=l[d],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&f.push(s[r][0]),s[r]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);c&&c(t);while(f.length)f.shift()();return a.push.apply(a,u||[]),i()}function i(){for(var e,t=0;t<a.length;t++){for(var i=a[t],n=!0,l=1;l<i.length;l++){var o=i[l];0!==s[o]&&(n=!1)}n&&(a.splice(t--,1),e=r(r.s=i[0]))}return e}var n={},s={app:0},a=[];function r(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=n,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],o=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var c=o;a.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"021b":function(e,t,i){"use strict";var n=i("30ea"),s=i.n(n);s.a},"1ae4":function(e,t,i){e.exports=i.p+"img/logo.449e66a7.svg"},2221:function(e,t,i){"use strict";var n=i("7b46"),s=i.n(n);s.a},"2df3":function(e,t,i){"use strict";var n=i("ff7a"),s=i.n(n);s.a},"30ea":function(e,t,i){},"56d7":function(e,t,i){"use strict";i.r(t);i("e260"),i("e6cf"),i("cca6"),i("a79d");var n=i("2b0e"),s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("router-view")],1)},a=[],r=(i("fa6d"),{name:"App"}),l=r,o=i("2877"),u=Object(o["a"])(l,s,a,!1,null,null,null),c=u.exports,d=i("8c4f"),f=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"game"}},[e._m(0),i("div",{staticClass:"form-group level"},[i("label",{attrs:{for:"level"}},[e._v("難易度: ")]),i("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedLevelName,expression:"selectedLevelName"}],attrs:{id:"level"},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedLevelName=t.target.multiple?i:i[0]}}},e._l(e.levels,(function(t,n){return i("option",{key:t.difficulity},[e._v(e._s(n))])})),0)]),i("div",{staticClass:"game-wrapper text-center"},[i("div",{staticClass:"game"},[i("div",{staticClass:"indicators-wrapper form-group"},[i("div",{staticClass:"indicators"},[i("Digits",{attrs:{value:e.selectedLevel.mineCount,digitSize:3}}),i("div",{staticClass:"face button",on:{click:e.init}},[i("div",{staticClass:"face-background mx-auto"},[i("font-awesome-icon",{staticClass:"fa fa-face",attrs:{size:"3x",icon:e.emotion}})],1)]),i("Digits",{attrs:{value:e.timeSecondsCount,digitSize:3}})],1)]),i("Panel",{attrs:{timeSecondsLimit:e.selectedLevel.timeSecondsLimit,sizeWidth:e.selectedLevel.sizeWidth,sizeHeight:e.selectedLevel.sizeHeight,mineCount:e.selectedLevel.mineCount},on:{start:e.start,end:e.end,reset:e.reset}})],1)])])},h=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"logo"},[n("img",{attrs:{src:i("1ae4")}}),n("span",[e._v("マインスイーパー")]),n("img",{attrs:{src:i("1ae4")}})])}],m=(i("b64b"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"form-group",attrs:{id:"panel-wrapper"}},[i("div",{staticClass:"d-inline-block",attrs:{id:"panel"}},e._l(e.tiles,(function(t,n){return i("div",{key:n,staticClass:"row"},e._l(t,(function(t,s){return i("div",{key:s,staticClass:"col"},[i("Tile",{attrs:{row:n,col:s,number:t.number,hasMine:t.hasMine,opened:t.opened,flagged:t.flagged,badFlagged:t.badFlagged,frozen:e.frozen},on:{open:e.open,flag:e.flag}})],1)})),0)})),0)])}),p=[],g=(i("99af"),i("4de4"),i("0481"),i("4160"),i("d81d"),i("13d5"),i("a434"),i("4069"),i("a9e3"),i("159b"),i("2909")),v=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tile button",class:[{"button-disabled":!e.canOpen}]},[i("input",{attrs:{type:"checkbox",id:e.id,disabled:!e.canOpen},domProps:{checked:e.opened},on:{click:function(t){return e.$emit("open",[e.row,e.col])}}}),i("label",{class:[e.numberClass,e.openedClass,e.mineClass,e.flaggedClass,e.badFlaggedClass],attrs:{for:e.id},on:{contextmenu:function(t){return t.preventDefault(),e.$emit("flag",[e.row,e.col])}}}),i("transition",{attrs:{name:"transition-bomb"}},[e.opened&&e.hasMine?i("font-awesome-icon",{staticClass:"fa fa-bomb",attrs:{icon:"bomb",size:"lg"}}):e._e()],1),!e.opened&&e.flagged?i("font-awesome-icon",{staticClass:"fa fa-flag",attrs:{icon:"flag",size:"lg"},on:{contextmenu:function(t){return t.preventDefault(),e.$emit("flag",[e.row,e.col])}}}):e._e(),e.opened&&e.badFlagged?i("font-awesome-icon",{staticClass:"fa fa-times",attrs:{icon:"times",size:"lg"}}):e._e()],1)},b=[],C={name:"Tile",data:function(){return{numberClass:"",openedClass:"",mineClass:"",flaggedClass:"",badFlaggedClass:""}},props:{row:{type:Number,required:!0},col:{type:Number,required:!0},number:{type:Number,required:!0,default:0},opened:{type:Boolean,default:!1},hasMine:{type:Boolean,default:!1},flagged:{type:Boolean,default:!1},badFlagged:{type:Boolean,default:!1},frozen:{type:Boolean,default:!1}},watch:{number:function(){this.numberClass=this.number>0?"number-".concat(this.number):""},opened:function(){this.openedClass=this.opened?"opened":"",this.mineClass=this.hasMine&&this.opened?"mine":""},flagged:function(){this.flaggedClass=this.flagged?"flagged":""},badFlagged:function(){this.badFlaggedClass=this.badFlagged?"flagged-bad":""}},computed:{id:{get:function(){return"tile-".concat(this.row,"-").concat(this.col)}},canOpen:{get:function(){return!this.opened&&!this.flagged&&!this.frozen}}}},y=C,_=(i("2df3"),Object(o["a"])(y,v,b,!1,null,null,null)),w=_.exports,z=i("1a92"),O=i.n(z),M=new n["a"],S=M,j=[[[-1,-1],[0,-1],[1,-1]],[[-1,0],null,[1,0]],[[-1,1],[0,1],[1,1]]],x={name:"Panel",components:{Tile:w},data:function(){return{isStarted:!1,isCleared:!1,isGameOver:!1,tiles:[],timers:[]}},props:{timeSecondsLimit:{type:Number,required:!1,default:null},sizeWidth:{type:Number,required:!0,default:7},sizeHeight:{type:Number,required:!0,default:9},mineCount:{type:Number,required:!0,default:10}},created:function(){this.init();var e=this;S.$on("init",(function(){return e.init()}))},watch:{sizeWidth:function(){this.init()},sizeHeight:function(){this.init()}},computed:{safeCountOfRemaining:{get:function(){return this.tiles.reduce((function(e,t){return e+t.reduce((function(e,t){return e+(t.opened||t.hasMine?0:1)}),0)}),0)}},hiddenMineCountOfRemaining:{get:function(){return this.tiles.reduce((function(e,t){return e+t.reduce((function(e,t){return e+(!t.opened&&t.hasMine?1:0)}),0)}),0)}},mineTiles:{get:function(){return this.tiles.map((function(e){return e.filter((function(e){return e.hasMine}))})).flat()}},flaggedTiles:{get:function(){return this.tiles.map((function(e){return e.filter((function(e){return e.flagged}))})).flat()}},closedTiles:{get:function(){return this.tiles.map((function(e){return e.filter((function(e){return!e.opened}))})).flat()}},frozen:{get:function(){return this.isGameOver||this.isCleared}}},methods:{init:function(){var e=this;this.isStarted=!1,this.isCleared=!1,this.isGameOver=!1,this.timers.forEach((function(e){return clearTimeout(e)})),this.timers=[],this.$emit("reset"),this.tiles=Object(g["a"])(Array(this.sizeHeight)).map((function(){return Object(g["a"])(Array(e.sizeWidth)).map((function(){return null}))})),this.tiles.forEach((function(t,i){return t.forEach((function(t,n){t={row:i,col:n,flagged:!1,badFlagged:!1,opened:!1,number:0,hasMine:!1},e.tiles[i].splice(n,1,t)}))}))},start:function(e,t){var i=this;this.isStarted=!0,this.$emit("start");var n=0;while(n<this.mineCount){var s=Math.floor(Math.random()*this.sizeWidth),a=Math.floor(Math.random()*this.sizeHeight);this.tiles[a][s].hasMine||t===s&&e===a||(this.tiles[a][s]=Object.assign(this.tiles[a][s],{hasMine:!0}),this.tiles[a].splice(s,1,this.tiles[a][s]),n++)}this.tiles.forEach((function(e,t){return e.forEach((function(e,n){if(e.hasMine)e.number=-1;else{var s=0;j.forEach((function(e,a){return e.forEach((function(e,r){if(j[a][r]){var l=j[a][r][0],o=j[a][r][1];n+l<0||i.sizeWidth<=n+l||t+o<0||i.sizeHeight<=t+o||i.tiles[t+o][n+l].hasMine&&s++}}))})),i.tiles[t][n]=Object.assign(i.tiles[t][n],{number:s}),i.tiles[t].splice(n,1,i.tiles[t][n])}}))}))},flag:function(e){if(!this.frozen){var t=e[0],i=e[1];this.tiles[t][i]=Object.assign(this.tiles[t][i],{flagged:!this.tiles[t][i].flagged}),this.tiles[t].splice(i,1,this.tiles[t][i])}},open:function(e){var t=this,i=e[0],n=e[1];if(!this.tiles[i][n].opened&&(this.isStarted||this.start(i,n),this.tiles[i][n].opened=!0,this.tiles[i][n].hasMine&&(this.isGameOver=!0,this.$emit("end",!1),this.openMinesAll()),0===this.tiles[i][n].number&&j.forEach((function(e,s){return e.forEach((function(e,a){if(j[s][a]){var r=j[s][a][0],l=j[s][a][1];n+r<0||t.sizeWidth<=n+r||i+l<0||t.sizeHeight<=i+l||t.open([i+l,n+r])}}))})),0===this.safeCountOfRemaining&&!this.isCleared)){this.$emit("end",!0);var s=this;this.closedTiles.forEach((function(e){return s._flagForce(e.row,e.col)})),this.isCleared=!0}},openMinesAll:function(){var e=this,t=this.mineTiles,i=this.flaggedTiles,n=t.concat(i);O()(n),this.timers=[],n.forEach((function(t,i){if(t.hasMine||t.flagged){var n=e;e.timers.push(setTimeout((function(){return n._openSilently(t.row,t.col)}),50*(i+1)))}}))},_openSilently:function(e,t){this.tiles[e][t]=Object.assign(this.tiles[e][t],{opened:!0,badFlagged:!this.tiles[e][t].hasMine&&this.tiles[e][t].flagged}),this.tiles[e].splice(t,1,this.tiles[e][t])},_flagForce:function(e,t){this.tiles[e][t]=Object.assign(this.tiles[e][t],{flagged:!0}),this.tiles[e].splice(t,1,this.tiles[e][t])}}},E=x,N=(i("f7ca"),Object(o["a"])(E,m,p,!1,null,null,null)),$=N.exports,L=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"digits"},e._l(e.digits,(function(e,t){return i("Digit",{key:t,attrs:{number:e}})})),1)},k=[],T=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"digit"},[0===e.number?i("div",{staticClass:"display d0"}):e._e(),1===e.number?i("div",{staticClass:"display d1"}):e._e(),2===e.number?i("div",{staticClass:"display d2"}):e._e(),3===e.number?i("div",{staticClass:"display d3"}):e._e(),4===e.number?i("div",{staticClass:"display d4"}):e._e(),5===e.number?i("div",{staticClass:"display d5"}):e._e(),6===e.number?i("div",{staticClass:"display d6"}):e._e(),7===e.number?i("div",{staticClass:"display d7"}):e._e(),8===e.number?i("div",{staticClass:"display d8"}):e._e(),9===e.number?i("div",{staticClass:"display d9"}):e._e()])},F=[],H={name:"Digit",props:{number:{type:Number,default:0}}},P=H,W=(i("021b"),Object(o["a"])(P,T,F,!1,null,null,null)),D=W.exports,q={name:"Digits",components:{Digit:D},props:{value:{type:Number,default:0},digitSize:{type:Number,default:3}},computed:{digits:{get:function(){for(var e=[],t=Math.min(this.value,Math.pow(10,this.digitSize)-1),i=0;i<this.digitSize;i++){var n=t%10;e.push(n),t=Math.floor(t/10)}return e.reverse()}}}},G=q,A=(i("899e"),Object(o["a"])(G,L,k,!1,null,null,null)),B=A.exports,I={name:"Game",components:{Panel:$,Digits:B},data:function(){return{levels:{"簡単":{difficulity:0,sizeWidth:9,sizeHeight:9,mineCount:10},"普通":{difficulity:1,sizeWidth:16,sizeHeight:16,mineCount:40},"難しい":{difficulity:2,sizeWidth:30,sizeHeight:16,mineCount:99}},selectedLevelName:"",timeSecondsCount:0,timer:null,emotion:"smile"}},computed:{selectedLevel:function(){return this.selectedLevelName?this.levels[this.selectedLevelName]:null}},created:function(){this.selectedLevelName=Object.keys(this.levels)[0]},methods:{start:function(){this.timeSecondsCount=0;var e=this;this.timer=setInterval((function(){return e.timeSecondsCount++}),1e3)},end:function(e){this.emotion=e?"laugh-beam":"dizzy",clearInterval(this.timer)},reset:function(){this.emotion="smile",this.timeSecondsCount=0,clearInterval(this.timer)},init:function(){S.$emit("init")}}},R=I,J=(i("2221"),Object(o["a"])(R,f,h,!1,null,null,null)),K=J.exports;n["a"].use(d["a"]);var Q=[{path:"/",name:"Game",component:K,meta:{title:"マインスイーパー"}},{path:"*",redirect:{name:"Game"}}],U=new d["a"]({base:"",routes:Q});U.beforeEach((function(e,t,i){window.document.title=e.meta.title,i()}));var V=U,X=i("5fbf"),Y=i("58e7"),Z=i("b702"),ee=i("f2d1"),te=i("c944");n["a"].config.productionTip=!1,X["c"].add(Y["a"],Z["a"],ee["a"]),n["a"].component("font-awesome-icon",te["a"]),new n["a"]({router:V,render:function(e){return e(c)}}).$mount("#app")},"7b46":function(e,t,i){},"899e":function(e,t,i){"use strict";var n=i("c94b"),s=i.n(n);s.a},c94b:function(e,t,i){},df2f:function(e,t,i){},f7ca:function(e,t,i){"use strict";var n=i("df2f"),s=i.n(n);s.a},ff7a:function(e,t,i){}});
//# sourceMappingURL=app.c1091a68.js.map